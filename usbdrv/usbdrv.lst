   1               		.file	"usbdrv.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.global	usbInit
  11               	usbInit:
  12               	/* prologue: function */
  13               	/* frame size = 0 */
  14 0000 E9E6      		ldi r30,lo8(105)
  15 0002 F0E0      		ldi r31,hi8(105)
  16 0004 8081      		ld r24,Z
  17 0006 8260      		ori r24,lo8(2)
  18 0008 8083      		st Z,r24
  19 000a E89A      		sbi 61-32,0
  20 000c 8BE4      		ldi r24,lo8(75)
  21 000e 8093 0000 		sts usbTxStatus1+1,r24
  22 0012 8AE5      		ldi r24,lo8(90)
  23 0014 8093 0000 		sts usbTxStatus1,r24
  24               	/* epilogue start */
  25 0018 0895      		ret
  27               	.global	usbSetInterrupt
  29               	usbSetInterrupt:
  30 001a 1F93      		push r17
  31               	/* prologue: function */
  32               	/* frame size = 0 */
  33 001c DC01      		movw r26,r24
  34 001e 162F      		mov r17,r22
  35 0020 8091 0000 		lds r24,usbTxStatus1
  36 0024 84FF      		sbrs r24,4
  37 0026 00C0      		rjmp .L4
  38 0028 8091 0000 		lds r24,usbTxStatus1+1
  39 002c 98E8      		ldi r25,lo8(-120)
  40 002e 8927      		eor r24,r25
  41 0030 8093 0000 		sts usbTxStatus1+1,r24
  42 0034 00C0      		rjmp .L5
  43               	.L4:
  44 0036 8AE5      		ldi r24,lo8(90)
  45 0038 8093 0000 		sts usbTxStatus1,r24
  46               	.L5:
  47 003c 912F      		mov r25,r17
  48 003e E0E0      		ldi r30,lo8(usbTxStatus1+2)
  49 0040 F0E0      		ldi r31,hi8(usbTxStatus1+2)
  50               	.L6:
  51 0042 8D91      		ld r24,X+
  52 0044 8193      		st Z+,r24
  53 0046 9150      		subi r25,lo8(-(-1))
  54 0048 01F4      		brne .L6
  55 004a 80E0      		ldi r24,lo8(usbTxStatus1+2)
  56 004c 90E0      		ldi r25,hi8(usbTxStatus1+2)
  57 004e 612F      		mov r22,r17
  58 0050 0E94 0000 		call usbCrc16Append
  59 0054 1C5F      		subi r17,lo8(-(4))
  60 0056 1093 0000 		sts usbTxStatus1,r17
  61               	/* epilogue start */
  62 005a 1F91      		pop r17
  63 005c 0895      		ret
  65               	.global	usbPoll
  67               	usbPoll:
  68 005e 1F93      		push r17
  69 0060 CF93      		push r28
  70 0062 DF93      		push r29
  71               	/* prologue: function */
  72               	/* frame size = 0 */
  73 0064 9091 0000 		lds r25,usbRxLen
  74 0068 9350      		subi r25,lo8(-(-3))
  75 006a 97FD      		sbrc r25,7
  76 006c 00C0      		rjmp .L10
  77 006e 2091 0000 		lds r18,usbInputBufOffset
  78 0072 8091 0000 		lds r24,usbRxToken
  79 0076 8D32      		cpi r24,lo8(45)
  80 0078 01F0      		breq .+2
  81 007a 00C0      		rjmp .L11
  82 007c 9830      		cpi r25,lo8(8)
  83 007e 01F0      		breq .+2
  84 0080 00C0      		rjmp .L11
  85 0082 CCE0      		ldi r28,lo8(12)
  86 0084 D0E0      		ldi r29,hi8(12)
  87 0086 C21B      		sub r28,r18
  88 0088 D109      		sbc r29,__zero_reg__
  89 008a C050      		subi r28,lo8(-(usbRxBuf))
  90 008c D040      		sbci r29,hi8(-(usbRxBuf))
  91 008e 83EC      		ldi r24,lo8(-61)
  92 0090 8093 0000 		sts usbTxBuf,r24
  93 0094 8AE5      		ldi r24,lo8(90)
  94 0096 8093 0000 		sts usbTxLen,r24
  95 009a 1092 0000 		sts usbMsgFlags,__zero_reg__
  96 009e 8881      		ld r24,Y
  97 00a0 8076      		andi r24,lo8(96)
  98 00a2 01F0      		breq .L12
  99 00a4 CE01      		movw r24,r28
 100 00a6 0E94 0000 		call usbFunctionSetup
 101 00aa 282F      		mov r18,r24
 102 00ac 00C0      		rjmp .L13
 103               	.L12:
 104 00ae 9A81      		ldd r25,Y+2
 105 00b0 1092 0000 		sts usbTxBuf+9,__zero_reg__
 106 00b4 8981      		ldd r24,Y+1
 107 00b6 8823      		tst r24
 108 00b8 01F4      		brne .L14
 109 00ba 1092 0000 		sts usbTxBuf+10,__zero_reg__
 110 00be 22E0      		ldi r18,lo8(2)
 111 00c0 00C0      		rjmp .L53
 112               	.L14:
 113 00c2 8530      		cpi r24,lo8(5)
 114 00c4 01F4      		brne .L16
 115 00c6 9093 0000 		sts usbNewDeviceAddr,r25
 116 00ca 00C0      		rjmp .L55
 117               	.L16:
 118 00cc 8630      		cpi r24,lo8(6)
 119 00ce 01F4      		brne .L17
 120 00d0 8B81      		ldd r24,Y+3
 121 00d2 8130      		cpi r24,lo8(1)
 122 00d4 01F4      		brne .L18
 123 00d6 80E0      		ldi r24,lo8(usbDescriptorDevice)
 124 00d8 90E0      		ldi r25,hi8(usbDescriptorDevice)
 125 00da 9093 0000 		sts (usbMsgPtr)+1,r25
 126 00de 8093 0000 		sts usbMsgPtr,r24
 127 00e2 80E0      		ldi r24,lo8(0)
 128 00e4 22E1      		ldi r18,lo8(18)
 129 00e6 00C0      		rjmp .L19
 130               	.L18:
 131 00e8 8230      		cpi r24,lo8(2)
 132 00ea 01F0      		breq .L52
 133               	.L20:
 134 00ec 8330      		cpi r24,lo8(3)
 135 00ee 01F4      		brne .L21
 136 00f0 8A81      		ldd r24,Y+2
 137 00f2 8823      		tst r24
 138 00f4 01F4      		brne .L22
 139 00f6 80E0      		ldi r24,lo8(usbDescriptorString0)
 140 00f8 90E0      		ldi r25,hi8(usbDescriptorString0)
 141 00fa 9093 0000 		sts (usbMsgPtr)+1,r25
 142 00fe 8093 0000 		sts usbMsgPtr,r24
 143 0102 80E4      		ldi r24,lo8(64)
 144 0104 24E0      		ldi r18,lo8(4)
 145 0106 00C0      		rjmp .L19
 146               	.L22:
 147 0108 8130      		cpi r24,lo8(1)
 148 010a 01F0      		breq .L52
 149               	.L23:
 150 010c 8230      		cpi r24,lo8(2)
 151 010e 01F0      		breq .L52
 152               	.L24:
 153 0110 8330      		cpi r24,lo8(3)
 154 0112 01F4      		brne .L25
 155 0114 00C0      		rjmp .L52
 156               	.L21:
 157 0116 8132      		cpi r24,lo8(33)
 158 0118 01F4      		brne .L26
 159 011a 80E0      		ldi r24,lo8(usbDescriptorConfiguration+18)
 160 011c 90E0      		ldi r25,hi8(usbDescriptorConfiguration+18)
 161 011e 9093 0000 		sts (usbMsgPtr)+1,r25
 162 0122 8093 0000 		sts usbMsgPtr,r24
 163 0126 80E4      		ldi r24,lo8(64)
 164 0128 29E0      		ldi r18,lo8(9)
 165 012a 00C0      		rjmp .L19
 166               	.L26:
 167 012c 8232      		cpi r24,lo8(34)
 168 012e 01F4      		brne .L25
 169               	.L52:
 170 0130 CE01      		movw r24,r28
 171 0132 0E94 0000 		call usbFunctionDescriptor
 172 0136 282F      		mov r18,r24
 173 0138 80E0      		ldi r24,lo8(0)
 174 013a 00C0      		rjmp .L19
 175               	.L25:
 176 013c 80E4      		ldi r24,lo8(64)
 177 013e 20E0      		ldi r18,lo8(0)
 178               	.L19:
 179 0140 8093 0000 		sts usbMsgFlags,r24
 180 0144 00C0      		rjmp .L13
 181               	.L17:
 182 0146 8830      		cpi r24,lo8(8)
 183 0148 01F4      		brne .L27
 184 014a 21E0      		ldi r18,lo8(1)
 185 014c 80E0      		ldi r24,lo8(usbConfiguration)
 186 014e 90E0      		ldi r25,hi8(usbConfiguration)
 187 0150 00C0      		rjmp .L15
 188               	.L27:
 189 0152 8930      		cpi r24,lo8(9)
 190 0154 01F4      		brne .L28
 191 0156 9093 0000 		sts usbConfiguration,r25
 192 015a 00C0      		rjmp .L55
 193               	.L28:
 194 015c 8A30      		cpi r24,lo8(10)
 195 015e 01F4      		brne .L29
 196 0160 21E0      		ldi r18,lo8(1)
 197 0162 00C0      		rjmp .L53
 198               	.L29:
 199 0164 8B30      		cpi r24,lo8(11)
 200 0166 01F4      		brne .L55
 201               	.L30:
 202 0168 8BE4      		ldi r24,lo8(75)
 203 016a 8093 0000 		sts usbTxStatus1+1,r24
 204               	.L55:
 205 016e 20E0      		ldi r18,lo8(0)
 206               	.L53:
 207 0170 80E0      		ldi r24,lo8(usbTxBuf+9)
 208 0172 90E0      		ldi r25,hi8(usbTxBuf+9)
 209               	.L15:
 210 0174 9093 0000 		sts (usbMsgPtr)+1,r25
 211 0178 8093 0000 		sts usbMsgPtr,r24
 212 017c 00C0      		rjmp .L31
 213               	.L13:
 214 017e 2F3F      		cpi r18,lo8(-1)
 215 0180 01F4      		brne .L31
 216 0182 8881      		ld r24,Y
 217 0184 87FD      		sbrc r24,7
 218 0186 2E81      		ldd r18,Y+6
 219               	.L32:
 220 0188 80E8      		ldi r24,lo8(-128)
 221 018a 8093 0000 		sts usbMsgFlags,r24
 222 018e 00C0      		rjmp .L34
 223               	.L31:
 224 0190 8F81      		ldd r24,Y+7
 225 0192 8823      		tst r24
 226 0194 01F4      		brne .L34
 227 0196 8E81      		ldd r24,Y+6
 228 0198 8217      		cp r24,r18
 229 019a 00F0      		brlo .L33
 230               	.L34:
 231 019c 822F      		mov r24,r18
 232               	.L33:
 233 019e 8093 0000 		sts usbMsgLen,r24
 234               	.L11:
 235 01a2 1092 0000 		sts usbRxLen,__zero_reg__
 236               	.L10:
 237 01a6 8091 0000 		lds r24,usbTxLen
 238 01aa 84FF      		sbrs r24,4
 239 01ac 00C0      		rjmp .L35
 240 01ae 8091 0000 		lds r24,usbMsgLen
 241 01b2 8F3F      		cpi r24,lo8(-1)
 242 01b4 01F4      		brne .+2
 243 01b6 00C0      		rjmp .L35
 244 01b8 182F      		mov r17,r24
 245 01ba 8930      		cpi r24,lo8(9)
 246 01bc 00F0      		brlo .L36
 247 01be 18E0      		ldi r17,lo8(8)
 248               	.L36:
 249 01c0 811B      		sub r24,r17
 250 01c2 8093 0000 		sts usbMsgLen,r24
 251 01c6 8091 0000 		lds r24,usbTxBuf
 252 01ca 98E8      		ldi r25,lo8(-120)
 253 01cc 8927      		eor r24,r25
 254 01ce 8093 0000 		sts usbTxBuf,r24
 255 01d2 1123      		tst r17
 256 01d4 01F0      		breq .L37
 257 01d6 8091 0000 		lds r24,usbMsgFlags
 258 01da 87FF      		sbrs r24,7
 259 01dc 00C0      		rjmp .L38
 260 01de 80E0      		ldi r24,lo8(usbTxBuf+1)
 261 01e0 90E0      		ldi r25,hi8(usbTxBuf+1)
 262 01e2 612F      		mov r22,r17
 263 01e4 0E94 0000 		call usbFunctionRead
 264 01e8 182F      		mov r17,r24
 265 01ea 8930      		cpi r24,lo8(9)
 266 01ec 00F4      		brsh .L51
 267 01ee 00C0      		rjmp .L37
 268               	.L38:
 269 01f0 2091 0000 		lds r18,usbMsgPtr
 270 01f4 3091 0000 		lds r19,(usbMsgPtr)+1
 271 01f8 86FF      		sbrs r24,6
 272 01fa 00C0      		rjmp .L40
 273 01fc A0E0      		ldi r26,lo8(usbTxBuf+1)
 274 01fe B0E0      		ldi r27,hi8(usbTxBuf+1)
 275 0200 80E0      		ldi r24,lo8(0)
 276 0202 90E0      		ldi r25,hi8(0)
 277               	.L41:
 278 0204 F901      		movw r30,r18
 279 0206 E80F      		add r30,r24
 280 0208 F91F      		adc r31,r25
 281               	/* #APP */
 282               	 ;  504 "usbdrv/usbdrv.c" 1
 283 020a E491      		lpm r30, Z
 284               		
 285               	 ;  0 "" 2
 286               	/* #NOAPP */
 287 020c ED93      		st X+,r30
 288 020e 0196      		adiw r24,1
 289 0210 1817      		cp r17,r24
 290 0212 01F4      		brne .L41
 291 0214 00C0      		rjmp .L54
 292               	.L40:
 293 0216 912F      		mov r25,r17
 294 0218 D901      		movw r26,r18
 295 021a E0E0      		ldi r30,lo8(usbTxBuf+1)
 296 021c F0E0      		ldi r31,hi8(usbTxBuf+1)
 297               	.L43:
 298 021e 8D91      		ld r24,X+
 299 0220 8193      		st Z+,r24
 300 0222 9150      		subi r25,lo8(-(-1))
 301 0224 01F4      		brne .L43
 302               	.L54:
 303 0226 1150      		subi r17,lo8(-(-1))
 304 0228 812F      		mov r24,r17
 305 022a 90E0      		ldi r25,lo8(0)
 306 022c 1F5F      		subi r17,lo8(-(1))
 307 022e 0196      		adiw r24,1
 308 0230 820F      		add r24,r18
 309 0232 931F      		adc r25,r19
 310 0234 9093 0000 		sts (usbMsgPtr)+1,r25
 311 0238 8093 0000 		sts usbMsgPtr,r24
 312               	.L37:
 313 023c 80E0      		ldi r24,lo8(usbTxBuf+1)
 314 023e 90E0      		ldi r25,hi8(usbTxBuf+1)
 315 0240 612F      		mov r22,r17
 316 0242 0E94 0000 		call usbCrc16Append
 317 0246 612F      		mov r22,r17
 318 0248 6C5F      		subi r22,lo8(-(4))
 319 024a 6C30      		cpi r22,lo8(12)
 320 024c 01F0      		breq .L44
 321 024e 8FEF      		ldi r24,lo8(-1)
 322 0250 8093 0000 		sts usbMsgLen,r24
 323 0254 00C0      		rjmp .L44
 324               	.L51:
 325 0256 8FEF      		ldi r24,lo8(-1)
 326 0258 8093 0000 		sts usbMsgLen,r24
 327 025c 6EE1      		ldi r22,lo8(30)
 328               	.L44:
 329 025e 6093 0000 		sts usbTxLen,r22
 330               	.L35:
 331 0262 94E1      		ldi r25,lo8(20)
 332               	.L46:
 333 0264 89B1      		in r24,41-32
 334 0266 8C70      		andi r24,lo8(12)
 335 0268 01F4      		brne .L47
 336 026a 9150      		subi r25,lo8(-(-1))
 337 026c 01F4      		brne .L46
 338 026e 1092 0000 		sts usbNewDeviceAddr,__zero_reg__
 339 0272 1092 0000 		sts usbDeviceAddr,__zero_reg__
 340               	.L47:
 341               	/* epilogue start */
 342 0276 DF91      		pop r29
 343 0278 CF91      		pop r28
 344 027a 1F91      		pop r17
 345 027c 0895      		ret
 347               	.global	usbTxLen
 348               		.data
 351               	usbTxLen:
 352 0000 5A        		.byte	90
 353               	.global	usbDescriptorString0
 354               		.section	.progmem.data,"a",@progbits
 357               	usbDescriptorString0:
 358 0000 04        		.byte	4
 359 0001 03        		.byte	3
 360 0002 09        		.byte	9
 361 0003 04        		.byte	4
 362               		.data
 365               	usbMsgLen:
 366 0001 FF        		.byte	-1
 367               		.lcomm usbMsgFlags,1
 368               		.comm usbMsgPtr,2,1
 369               		.comm usbRxToken,1,1
 370               		.comm usbConfiguration,1,1
 371               		.comm usbTxStatus1,12,1
 372               		.comm usbRxBuf,22,1
 373               		.comm usbInputBufOffset,1,1
 374               		.comm usbDeviceAddr,1,1
 375               		.comm usbNewDeviceAddr,1,1
 376               		.comm usbRxLen,1,1
 377               		.comm usbCurrentTok,1,1
 378               		.comm usbTxBuf,11,1
 379               	.global __do_copy_data
 380               	.global __do_clear_bss
DEFINED SYMBOLS
                            *ABS*:00000000 usbdrv.c
C:\Users\klaute\AppData\Local\Temp/ccU8m1zO.s:2      *ABS*:0000003f __SREG__
C:\Users\klaute\AppData\Local\Temp/ccU8m1zO.s:3      *ABS*:0000003e __SP_H__
C:\Users\klaute\AppData\Local\Temp/ccU8m1zO.s:4      *ABS*:0000003d __SP_L__
C:\Users\klaute\AppData\Local\Temp/ccU8m1zO.s:5      *ABS*:00000034 __CCP__
C:\Users\klaute\AppData\Local\Temp/ccU8m1zO.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\klaute\AppData\Local\Temp/ccU8m1zO.s:7      *ABS*:00000001 __zero_reg__
C:\Users\klaute\AppData\Local\Temp/ccU8m1zO.s:11     .text:00000000 usbInit
                            *COM*:0000000c usbTxStatus1
C:\Users\klaute\AppData\Local\Temp/ccU8m1zO.s:29     .text:0000001a usbSetInterrupt
C:\Users\klaute\AppData\Local\Temp/ccU8m1zO.s:67     .text:0000005e usbPoll
                            *COM*:00000001 usbRxLen
                            *COM*:00000001 usbInputBufOffset
                            *COM*:00000001 usbRxToken
                            *COM*:00000016 usbRxBuf
                            *COM*:0000000b usbTxBuf
C:\Users\klaute\AppData\Local\Temp/ccU8m1zO.s:351    .data:00000000 usbTxLen
                             .bss:00000000 usbMsgFlags
                            *COM*:00000001 usbNewDeviceAddr
                            *COM*:00000002 usbMsgPtr
C:\Users\klaute\AppData\Local\Temp/ccU8m1zO.s:357    .progmem.data:00000000 usbDescriptorString0
                            *COM*:00000001 usbConfiguration
C:\Users\klaute\AppData\Local\Temp/ccU8m1zO.s:365    .data:00000001 usbMsgLen
                            *COM*:00000001 usbDeviceAddr
                            *COM*:00000001 usbCurrentTok

UNDEFINED SYMBOLS
usbCrc16Append
usbFunctionSetup
usbDescriptorDevice
usbDescriptorConfiguration
usbFunctionDescriptor
usbFunctionRead
__do_copy_data
__do_clear_bss
